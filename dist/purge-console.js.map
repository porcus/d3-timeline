{"version":3,"sources":["purge-console.js"],"names":["PurgeConsole","element","initialData","opts","self","options","extendOptions","Array","prototype","selectMany","memberArraySelectorFn","length","map","reduce","a","b","concat","d3","selection","appendHTML","HTMLString","select","appendChild","document","importNode","DOMParser","parseFromString","body","childNodes","hide","style","show","visible","value","undefined","appendHtmlNodesToHead","headHTMLString","targetNode","node","nodesToImport","head","i","join","initializeTableFeatures","window","Tablesaw","setTimeout","init","purgeRequestDetailsContainer","getElementById","purgeResultDetailsContainer","purgeRequestTakeInput","purgeRequestSkipInput","property","take","skip","on","fetchAndRenderPurgeRequestsUsingInputs","displayPurgeOperationResult","request","data","console","log","emptyContainer","tf","timeFormat","time","operationName","entityId","Entity","Path","PurgeStatus","Successful","ResultMessage","issuePurgeRequestForEntity","entityType","endpoint","Date","json","get","evt","Error","target","status","statusText","selectAll","op","attr","getBootstrapClassForPurgeRequestStatus","prStatus","cls","getHtmlForEntityPurgeStatus","epStatus","purgeRequestPropertyConfigs","priority","propertyLabel","propertyValueSelector","formatDateTime","x","LastModified","numericSort","onClick","TypeName","Id","pr","Status","User","FirstName","LastName","ReferenceNote","ResultMessages","replace","PurgeFailureCode","dataModel","getDataModel","loadData","fetchAndRenderPurgeRequests","timeline","parseInt","NaN","requestParams","requestParameters","xhr","dataToLoad","processData","renderData","ymdhmsTimeParser","utcParse","ymdhmsTimeFormatter","hmslTimeFormatter","dataModelToProcess","Items","forEach","dataModelToRender","renderPurgeRequestsTable","beforeSnapshotDataSerialized","ssd","CaseTimer","CaseTimerType","Sla","Case","date","container","firstChild","removeChild","allPurgeRequests","selectedItems","renderTableOfObjects","tableContainer","propertyConfigs","itemsToRender","itemsToHighlight","alert","table","append","classed","headerRow","pc","html","tbody","tr","findIndex","o","obj","enter","call","renderPropertyValue","sel","highlightedElements","nodes","scrollIntoView","block","d3SelectionBoundToPropertyConfig","objectWithProperties","d","getHtmlContentForPropertyValue","propertyConfig","propertyValue","constructor","ext","defaultOptions","Object","keys","k","newData","module","exports"],"mappings":"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","file":"purge-console.js","sourcesContent":["/*\r\n\r\n<PurgeRequest> ->\r\n{\r\n    Entity: <Entity>,\r\n    EntityId: <string: GUID>,\r\n    EntityType: <string>,\r\n    Id: <string: GUID>,\r\n    LastModified: <datetime>,\r\n    ReferenceNote: <string>,\r\n    ResultMessages: <string>,\r\n    Status: <string>,\r\n    User: <User>\r\n}\r\n\r\n<User> ->\r\n{\r\n    FirstName: <string>,\r\n    Id: <string: GUID>,\r\n    LastModified: <datetime>,\r\n    LastName: <string>\r\n}\r\n\r\n<Entity> ->\r\n{\r\n    Id: <string: GUID>,\r\n    LastModified: <datetime>\r\n    Path: <string: TypeName/Id>,\r\n    PurgeStatus: <string>,\r\n    TypeName: <string>\r\n}\r\n\r\n<datetime> : <string: ISO8601 formatted> | <Date>\r\n\r\n*/\r\n\r\nclass PurgeConsole {\r\n    constructor(element, initialData, opts) {\r\n        let self = this;\r\n\r\n        let options = this.extendOptions(opts);\r\n\r\n        // We'll use this several times hereafter\r\n        Array.prototype.selectMany = function(memberArraySelectorFn){ return !this.length ? [] : this.map(memberArraySelectorFn).reduce((a,b) => a.concat(b)); };\r\n\r\n        // Extend the d3 selection prototype to include some additional functions\r\n\r\n        // Note:  This function will ONLY append the first element in the HTML string literal provided.\r\n        if (!d3.selection.prototype.appendHTML) {\r\n            d3.selection.prototype.appendHTML =\r\n            //d3.selection.enter.prototype.appendHTML = \r\n            function(HTMLString) {\r\n                return this.select(function() {\r\n                    return this.appendChild(document.importNode(new DOMParser().parseFromString(HTMLString, 'text/html').body.childNodes[0], true));\r\n                });\r\n            };\r\n        }\r\n        d3.selection.prototype.hide = \r\n            //d3.selection.enter.prototype.hide = \r\n            function() { this.style('display', 'none') };\r\n        d3.selection.prototype.show = \r\n            //d3.selection.enter.prototype.show = \r\n            function() { this.style('display', null) };\r\n        d3.selection.prototype.visible = \r\n            //d3.selection.enter.prototype.visible = \r\n            function(value) { if (value === undefined) return this.style('display') !== 'none'; this.style('display', !!value ? null : 'none'); };\r\n\r\n        function appendHtmlNodesToHead(headHTMLString) {\r\n            var targetNode = d3.select('head').node();\r\n            var nodesToImport = new DOMParser().parseFromString(headHTMLString, 'text/html').head.childNodes;\r\n            for(var i = 0; i < nodesToImport.length; i++) {\r\n                targetNode.appendChild(document.importNode(nodesToImport[i], true));\r\n            }\r\n        }\r\n\r\n        // Add style and script dependencies needed by this component\r\n        appendHtmlNodesToHead([\r\n            '<link href=\"https://cdn.jsdelivr.net/npm/tablesaw@3.0.9/dist/tablesaw.min.css\" rel=\"stylesheet\" type=\"text/css\">',\r\n            //'<script src=\"https://cdn.jsdelivr.net/npm/tablesaw@3.0.9/dist/tablesaw.min.js\"></script>'\r\n            //'<script src=\"tablesaw.min.js\"></script>'\r\n            ].join('\\n'));\r\n\r\n\r\n        function initializeTableFeatures() {\r\n            if (window.Tablesaw === undefined) {\r\n                setTimeout(initializeTableFeatures, 500);\r\n                return;\r\n            }\r\n\r\n            Tablesaw.init();\r\n        }\r\n\r\n\r\n        d3.select(element).appendHTML(`\r\n            <div id=\"case-timer-event-viewer-container\" class=\"container-fluid font-scale-pct-80\">\r\n\r\n                <div class=\"mt-3\">\r\n                    <div class=\"h4 bottom-border\"> Perform Purge Operations </div>\r\n\r\n                    <div id=\"case-timer-event-viewer-error\" class=\"alert alert-warning mt-3\" role=\"alert\">\r\n                        <div class=\"alert-heading\"> To view case timer data for a given case, please enter a valid entity Id for a case, SLA, case timer, case timer event, or case timer snapshot.</div>\r\n                    </div>\r\n                \r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-12\">\r\n                            <div> Enter an entity Id and click the button to perform a purge-related operation on it. </div>\r\n                            <div class=\"input-group\">\r\n                                <div class=\"input-group-prepend\">\r\n                                    <button class=\"btn btn-outline-secondary\" data-purge-entity-type=\"Case\" data-purge-operation=\"PreventPurge\">Prevent Purge</button>\r\n                                    <button class=\"btn btn-outline-secondary\" data-purge-entity-type=\"Case\" data-purge-operation=\"AllowPurge\">Allow Purge</button>\r\n                                    <button class=\"btn btn-outline-secondary\" data-purge-entity-type=\"Case\" data-purge-operation=\"CreatePurgeRequest\">Create Request</button>\r\n                                    <button class=\"btn btn-outline-secondary\" data-purge-entity-type=\"Case\" data-purge-operation=\"CancelPendingPurgeRequest\">Cancel Request</button>\r\n                                    <button class=\"btn btn-outline-secondary\" data-purge-entity-type=\"Case\" data-purge-operation=\"CreateAndExecutePurgeRequest\">Purge Now</button>\r\n                                </div>\r\n                                <input type=\"text\" id=\"entity-id\" class=\"form-control\" placeholder=\"Enter a valid entity (case or employee) Id\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row mb-3\">\r\n                        <div class=\"col-12\">\r\n                            <div id=\"purge-result-details\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div id=\"case-timer-event-viewer-content\">\r\n\r\n                    <div class=\"mb-3\">\r\n                        <div class=\"h4 bottom-border\"> Most Recent Purge Requests </div>\r\n\r\n                        <div id=\"case-timer-data-latest\" >\r\n                                <div class=\"form-row mb-3 align-items-center\">\r\n                                    <div class=\"col-auto\">\r\n                                        <button class=\"btn btn-primary\" id=\"fetch-purge-requests\"> Fetch Purge Requests </button>\r\n                                    </div>\r\n                                    <div class=\"col-auto\">\r\n                                        <div class=\"input-group\">\r\n                                            <div class=\"input-group-prepend\">\r\n                                                <span class=\"input-group-text\">Limit</span>\r\n                                            </div>\r\n                                            <input type=\"text\" class=\"form-control\" placeholder=\"Maximum number of recent purge requests to display\" id=\"purge-request-take\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-auto\">\r\n                                        <div class=\"input-group\">\r\n                                            <div class=\"input-group-prepend\">\r\n                                                <span class=\"input-group-text\">Skip</span>\r\n                                            </div>\r\n                                            <input type=\"text\" class=\"form-control\" placeholder=\"Number of recent purge requests to skip\" id=\"purge-request-skip\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            <div class=\"row mb-3\">\r\n                                <div class=\"col-12\">\r\n                                    <div id=\"purge-requests-latest\" class=\"scrollable-container\" ></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>`);\r\n\r\n        const purgeRequestDetailsContainer = document.getElementById('purge-requests-latest');\r\n        const purgeResultDetailsContainer = document.getElementById('purge-result-details');\r\n        const purgeRequestTakeInput = document.getElementById('purge-request-take');\r\n        const purgeRequestSkipInput = document.getElementById('purge-request-skip');\r\n\r\n        d3.select(purgeRequestTakeInput).property(\"value\", options.take);\r\n        d3.select(purgeRequestSkipInput).property(\"value\", options.skip);\r\n        d3.select('#fetch-purge-requests').on('click', fetchAndRenderPurgeRequestsUsingInputs);\r\n\r\n\r\n        function displayPurgeOperationResult(request, data) {\r\n            console.log('PurgeOperationResult: ', data);\r\n            emptyContainer(purgeResultDetailsContainer);\r\n            var tf = d3.timeFormat(\"%H:%M:%S.%L\");\r\n            d3.select(purgeResultDetailsContainer).appendHTML(`\r\n                <dl>\r\n                    <dt>Request</dt>\r\n                    <dd>\r\n                        [${tf(request.time)}]  Request made to ${request.operationName} for entity ${request.entityId}...\r\n                    </dd>\r\n                    <dt>Response Data</dt>\r\n                    <dd>\r\n                        [${tf(data.time)}] \r\n                        ${(!data.Entity ? '' : `Entity <code>${data.Entity.Path}</code> was found. Its purge status is now <strong>${data.Entity.PurgeStatus}</strong>.<br>`)}\r\n                    </dd>\r\n                    <dd class=\"font-weight-bold\">\r\n                        ${(data.Successful ? '<span class=\"badge badge-success\">Success</span>' : '<span class=\"badge badge-danger\">Failure</span>')}\r\n                        <span>${data.ResultMessage}</span>\r\n                    </dd>\r\n                </dl>\r\n            `);\r\n\r\n            // If operation was successful, then refresh the list of purge requests\r\n            fetchAndRenderPurgeRequestsUsingInputs();\r\n        }\r\n\r\n        function issuePurgeRequestForEntity(operationName, entityType) {\r\n            //var entityIdInputId = `${entityType.toLowerCase()}-id`;\r\n            //var entityId = d3.select('#'+entityIdInputId).property('value');\r\n            var entityId = d3.select('#entity-id').property('value');\r\n            var request = { endpoint: 'PerformPurgeOperation', /*entityType: entityType,*/ entityId: entityId, operationName: operationName, time: new Date() };\r\n            d3.json(`${request.endpoint}?id=${request.entityId}&op=${request.operationName}`)\r\n                .get(function(evt,data) {\r\n                    data = (evt instanceof Error) ? { \"Successful\":false, \"ResultMessage\": `Error occurred: ${evt}` } :\r\n                        data || { \"Successful\":false, \"ResultMessage\": `${evt.target.status} (${evt.target.statusText})` };\r\n                    data.time = new Date(); \r\n                    displayPurgeOperationResult(request, data); \r\n                });\r\n        }\r\n        \r\n        // Wire up purge operation requests\r\n        d3.selectAll('[data-purge-operation]').on('click', function() {\r\n            var op = d3.select(this).attr('data-purge-operation');\r\n            issuePurgeRequestForEntity(op);\r\n        });\r\n\r\n        // d3.select('#entity-id')\r\n        //     .on(\"keypress\", function() { if(d3.event.keyCode === 13) submitForm(); });\r\n\r\n        // =======================================================================================================================================================================\r\n        // Property Config fields:\r\n        //  priority (optional) - The priority of the field which indicates how important it is to show the field.  Range: 0(most important/always show) -> 6(least important)\r\n        //  propertyLabel - The label to display for the column header / field\r\n        //  propertyValueSelector - A function that returns the HTML content to be displayed, given the object\r\n        //  onClick - (optional) A click event handler which will be registered on the content.\r\n        // =======================================================================================================================================================================\r\n\r\n        function getBootstrapClassForPurgeRequestStatus(prStatus) {\r\n            var cls = \r\n                prStatus == \"Cancelled\" ? \"light\" :\r\n                prStatus == \"Pending\" ? \"info\" :\r\n                prStatus == \"FailedPrerequisite\" ? \"danger\" :\r\n                prStatus == \"ProcessingError\" ? \"danger\" :\r\n                prStatus == \"Purged\" ? \"dark\" :\r\n                \"danger\";\r\n            return `<span class=\"badge badge-${cls}\">${prStatus}<span>`;\r\n        }\r\n\r\n        function getHtmlForEntityPurgeStatus(epStatus) {\r\n            var cls =\r\n                epStatus == \"Restricted\" ? \"warning\" :\r\n                epStatus == \"None\" ? \"light\" :\r\n                epStatus == \"Pending\" ? \"info\" :\r\n                epStatus == \"Purged\" ? \"dark\" :\r\n                \"danger\";\r\n            return `<span class=\"badge badge-${cls}\">${epStatus}<span>`;\r\n        }\r\n\r\n        // PurgeRequest property configs\r\n        const purgeRequestPropertyConfigs = [\r\n            // the datetime value has to be prefixed by a character, because if not, then the sort function will assume the column represents a numeric value.\r\n            { priority: 2, propertyLabel: \"Last <br>Modified\", propertyValueSelector: x => '.'+formatDateTime(x.LastModified), numericSort: true, onClick: null },\r\n            { priority: 0, propertyLabel: \"Entity <br>Type\", propertyValueSelector: x => x.Entity.TypeName, onClick: null },\r\n            { priority: 0, propertyLabel: \"Entity Id\", propertyValueSelector: x => `<button type=\"button\" class=\"btn btn-light d-inline-block text-truncate\" style=\"max-width: 7em\" title=\"${x.Entity.Id}\">${x.Entity.Id}</button>`, \r\n                onClick: pr => { \r\n                    d3.select('#entity-id').property('value', pr.Entity.Id); \r\n                } },\r\n            { priority: 0, propertyLabel: \"Purge <br>Request <br>Status\", propertyValueSelector: x => `<h4>${getBootstrapClassForPurgeRequestStatus(x.Status)}</h4>`, onClick: null },\r\n            { priority: 0, propertyLabel: \"Entity <br>Purge <br>Status\", propertyValueSelector: x => `<h4>${getHtmlForEntityPurgeStatus(x.Entity.PurgeStatus)}</h4>`, onClick: null },\r\n            { priority: 4, propertyLabel: \"Requesting <br>User\", propertyValueSelector: x => `${x.User.FirstName}<br>${x.User.LastName}`, onClick: null },\r\n            { priority: 5, propertyLabel: \"Request <br>Reference <br>Note\", propertyValueSelector: x => x.ReferenceNote, onClick: null },\r\n            { priority: 2, propertyLabel: \"Result Messages\", propertyValueSelector: x => (x.ResultMessages || '').replace(/\\n/g, \"<br>\"), onClick: null },\r\n            { priority: 2, propertyLabel: \"Purge <br>Failure <br>Code\", propertyValueSelector: x => x.PurgeFailureCode, onClick: null },\r\n            { priority: 6, propertyLabel: \"Id\", propertyValueSelector: x => x.Id, onClick: null },\r\n        ];\r\n\r\n        var dataModel;\r\n        function getDataModel() {\r\n            return dataModel;\r\n        }\r\n        self.getDataModel = getDataModel;\r\n        self.loadData = loadData;\r\n        self.fetchAndRenderPurgeRequests = fetchAndRenderPurgeRequests;\r\n\r\n        // by default, we will attempt to fetch and render purge requests using the input parameters on the page\r\n        fetchAndRenderPurgeRequestsUsingInputs();\r\n\r\n        var timeline;\r\n\r\n        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n        // Other functions below\r\n\r\n        function fetchAndRenderPurgeRequestsUsingInputs() {\r\n\r\n            // Try to use the skip/take input parameters on the page.  \r\n            // Fall back to using the defaults if the value cannot be parsed or are out of bounds.\r\n\r\n            var skip = parseInt(d3.select(purgeRequestSkipInput).property('value'));\r\n            if (skip === NaN || skip < 0) skip = options.skip;\r\n\r\n            var take = parseInt(d3.select(purgeRequestTakeInput).property('value'));\r\n            if (take === NaN || take < 1 || take > 1000) take = options.take;\r\n\r\n            var requestParams = { \"skip\": skip, \"take\": take};\r\n            fetchAndRenderPurgeRequests(requestParams);\r\n        }\r\n\r\n        function fetchAndRenderPurgeRequests(requestParameters) {\r\n            console.log('Fetching latest purge requests using parameters: ', requestParameters);\r\n            d3.json(`purgerequests?skip=${requestParameters.skip}&take=${requestParameters.take}`)\r\n                .get((xhr,data) => { loadData(data); });\r\n        }\r\n\r\n        function loadData(dataToLoad) {\r\n            processData(dataToLoad);\r\n            renderData(dataToLoad); \r\n        }\r\n\r\n        var ymdhmsTimeParser = d3.utcParse(\"%Y-%m-%dT%H:%M:%SZ\");\r\n        var ymdhmsTimeFormatter = d3.timeFormat(\"%Y-%m-%d %H:%M:%S\");\r\n        var hmslTimeFormatter = d3.timeFormat(\"%H:%M:%S.%L\");\r\n\r\n        function processData(dataModelToProcess) {\r\n            if (!dataModelToProcess) { return; }\r\n            dataModelToProcess.Items.forEach(pr => {\r\n                pr.LastModified = ymdhmsTimeParser(pr.LastModified);\r\n            });\r\n        }\r\n\r\n        function renderData(dataModelToRender) {\r\n            // Update visibility of sections\r\n            d3.select('#case-timer-event-viewer-error').visible(dataModelToRender === null);\r\n            d3.select('#case-timer-event-viewer-content').visible(dataModelToRender !== null);\r\n\r\n            // Validate input\r\n            if (!dataModelToRender) { return; }\r\n    \r\n            //let caseTimerTimelineData = transformCaseDataToTimelineData(dataModelToRender);\r\n            console.log(\"PurgeRequest data: \", dataModelToRender);\r\n            //console.log(\"Timeline data: \", caseTimerTimelineData);\r\n\r\n            // Render stuff\r\n            //renderLatestCaseProperties(dataModelToRender);\r\n            renderPurgeRequestsTable(dataModelToRender.Items);\r\n\r\n            dataModel = dataModelToRender;\r\n        }\r\n\r\n        function beforeSnapshotDataSerialized(ssd) {\r\n            // If CaseTimer is for an SLA, then don't include redundant CaseTimer data.\r\n            // If CaseTimer is not for an SLA but if there is an SLA on the case, then do include its CaseTimer data, but don't include the Sla's CaseTimer's Case data.\r\n            if (ssd.CaseTimer.CaseTimerType === 'Sla')\r\n            {\r\n                // If the SLA hasn't already been removed\r\n                if (ssd.Sla != null)\r\n                {\r\n                    ssd.Sla.CaseTimer = \"(see SnapshotData.CaseTimer)\";  // = null;\r\n                }\r\n            }\r\n            else if (ssd.Sla != null)\r\n            {\r\n                ssd.Sla.CaseTimer.Case = \"(see SnapshotData.CaseTimer.Case)\";  // = null;\r\n            }\r\n        }\r\n\r\n        function formatDateTime(date) {\r\n            // We will only display fractional seconds to ms precision, because JS's date doesn't support any greater precision than that.\r\n            return ymdhmsTimeFormatter(date);\r\n        }\r\n\r\n        function emptyContainer(container)\r\n        {\r\n            // remove all child elements of the specified container\r\n            while (container.firstChild) {\r\n                container.removeChild(container.firstChild);\r\n            }\r\n        }\r\n\r\n        function renderPurgeRequestsTable(allPurgeRequests, selectedItems)\r\n        {\r\n            emptyContainer(purgeRequestDetailsContainer);\r\n            renderTableOfObjects(purgeRequestDetailsContainer, purgeRequestPropertyConfigs, allPurgeRequests, selectedItems);\r\n        }\r\n\r\n        function renderTableOfObjects(tableContainer, propertyConfigs, itemsToRender, itemsToHighlight)\r\n        {\r\n            // itemsToRender is required and must contain data\r\n            if (!itemsToRender)\r\n            {\r\n                alert('renderTableOfObjects called with no data');\r\n                return;\r\n            }\r\n\r\n            itemsToHighlight = itemsToHighlight || [];\r\n\r\n            var table = d3.select(tableContainer).append('table')\r\n                //.classed('table', true);\r\n                .classed('tablesaw', true)\r\n                //.attr( 'data-tablesaw-mode', 'stack')\r\n                .attr('data-tablesaw-sortable', '')\r\n                .attr('data-tablesaw-sortable-switch', '')\r\n                .attr('data-tablesaw-minimap', '')\r\n                .attr('data-tablesaw-mode', 'columntoggle')\r\n                ;\r\n            var headerRow = table.append('thead').append('tr');\r\n            // render table header\r\n            propertyConfigs.forEach(pc => headerRow\r\n                .append('th')\r\n                .attr('data-tablesaw-sortable-col', '')\r\n                //.attr('data-tablesaw-sortable-numeric', pc.numericSort) // if numericSort\r\n                .attr('data-tablesaw-priority', pc.priority === 0 ? 'persist' : pc.priority)\r\n                .html(pc.propertyLabel));\r\n\r\n            var tbody = table.append('tbody');\r\n\r\n            // Render each row\r\n            itemsToRender.forEach(obj => {\r\n                var tr = tbody.append('tr')\r\n                    .classed('row-highlight', itemsToHighlight.findIndex(o => o == obj) != -1)\r\n                    .selectAll('td').data(propertyConfigs);\r\n                tr.enter().append('td')\r\n                    .call(sel => renderPropertyValue(sel, obj));\r\n            });\r\n\r\n            // Apply tablesaw features to table\r\n            initializeTableFeatures();\r\n\r\n            // attempt to scroll all highlighted items into view\r\n            var highlightedElements = table.selectAll('.row-highlight').nodes();\r\n            if (highlightedElements && highlightedElements[0] && highlightedElements[0].scrollIntoView)\r\n            {\r\n                // scroll the last highlighted element into view\r\n                highlightedElements[highlightedElements.length-1].scrollIntoView({ block: \"nearest\" });\r\n                // if more than 1 is highlighted, then scroll the first highlighted element into view\r\n                if (highlightedElements.length > 1)\r\n                    highlightedElements[0].scrollIntoView({ block: \"nearest\" });\r\n            }\r\n\r\n        }\r\n\r\n        function renderPropertyValue(d3SelectionBoundToPropertyConfig, objectWithProperties) {\r\n            var obj = objectWithProperties;\r\n            d3SelectionBoundToPropertyConfig\r\n                .attr('data-title', d => d.propertyLabel)\r\n                .html(d => getHtmlContentForPropertyValue(d, obj))\r\n                .on('click', d => { \r\n                    if (typeof(d.onClick) == 'function') d.onClick(obj);\r\n                });\r\n        }\r\n\r\n        function getHtmlContentForPropertyValue(propertyConfig, obj)\r\n        {\r\n            var propertyValue = propertyConfig.propertyValueSelector(obj);\r\n\r\n            if (propertyValue === undefined)\r\n            {\r\n                return \"\";\r\n            }\r\n            else if (propertyValue === null)\r\n            {\r\n                return \"(null)\";\r\n            }\r\n            else if (typeof propertyValue == 'number')\r\n            {\r\n                return propertyValue;\r\n            }\r\n            else if (typeof propertyValue == 'string')\r\n            {\r\n                //if (isUUID(propertyValue))\r\n                //    return \"<span title='\"+propertyValue+\"'>\"+propertyValue.substring(0, 7)+\"...</span>\";\r\n                return propertyValue;\r\n            }\r\n            else if (typeof propertyValue == 'boolean')\r\n            {\r\n                return \"<input type='checkbox' \"+(!!propertyValue ? \"checked\" : \"\")+\" onclick='return false;' />\";\r\n            }\r\n            else if (propertyValue.constructor == (new Date()).constructor)\r\n            {\r\n                return formatDateTime(propertyValue);\r\n            }\r\n            // If nothing else was matched above, but if the onClick handler was set, then make it a button with the label \"View\"\r\n            else(!!propertyConfig.onClick)\r\n            {\r\n                return `<button class=\"btn btn-sm btn-${propertyConfig.priority < 3 ? 'primary' : 'secondary'}\">View</button>`;\r\n            }\r\n            return '<em>(no value resolver defined for this type)</em>';;\r\n        }\r\n\r\n    }\r\n\r\n    extendOptions(ext = {}) {\r\n        let defaultOptions = {\r\n            skip: 0,  // # of latest purge requests to skip\r\n            take: 20  // # of latest purge requests to take\r\n        };\r\n        Object.keys(ext).map(k => defaultOptions[k] = ext[k]);\r\n        return defaultOptions;\r\n    }\r\n\r\n    updateData(newData) {\r\n        this.loadData(newData);\r\n    }\r\n\r\n    fetchData(requestParams) {\r\n        this.fetchAndRenderPurgeRequests(requestParams)\r\n    }\r\n\r\n}\r\n\r\n\r\nmodule.exports = PurgeConsole;\r\n\r\n"]}